<section id="about" class="panel is-default">
  <div class="hero hero--about">
    <h1 class="headline">We think about the <span style="color: var(--accent-coral)">next generation</span> of work.</h1>
    <p class="subhead">고령화와 AI 시대에 우리는 <strong>“다음 세대의 일”</strong>을 고민합니다. 기술이 인간의 가능성을 확장하는 방식에 주목합니다.</p>
    <p class="subhead">NextWork Lab.은 의료·돌봄·산업 현장에서 근로자가 안전하게 일하고, 신체 기능을 유지하는데 도움이 되는 솔루션을 소개합니다.</p>
  </div>
</section>

<section id="function" class="panel">
  <div class="hero hero--product product">
    <h1 class="headline">CBW</h1>
    <p class="section-desc">근로자의 신체 기능을 유지하면서, 근골격계 부담을 최소화하는 솔루션입니다.</p>

    <div class="product-image">
      <img src="/images/CBW_WEB_A4_MS_1.png" alt="CBW 메인 이미지">
    </div>

    <p class="subhead">CBW는 바지 일체형으로 설계된 입는 근골격계 보조 수트입니다. 작업 중 허리와 하체에 가해지는 부담을 줄이고, 올바른 자세를 유지하도록 돕습니다.</p>

    <h3>01. 일상 착용을 전제로 설계된 구조</h3>
    <p class="detail-text">CBW는 별도의 장비를 착용하거나 휴대할 필요가 없습니다. 일반 작업복처럼 착용할 수 있어 출퇴근이나 일상 업무 중에도 자연스럽게 사용할 수 있습니다.</p>

    <h3>02. 자세를 잡아주는 핵심 메커니즘</h3>
    <p class="detail-text">복부 지지대를 통해 복강 내 압력을 높이고 요추를 안정적으로 지지합니다. 장시간 작업에서도 자세 유지에 도움이 되도록 설계되었습니다.</p>

    <h3>03. 반복 작업 환경을 고려한 보조 방식</h3>
    <p class="detail-text">물건을 들어 올리거나 내릴 때에는 바지 내부의 밴드 구조가 작동합니다. 반복적이고 강도가 있는 동작을 고려한 설계입니다.</p>

    <div class="cta-group">
      <a href="mailto:info@tuatua.kr?subject=[CBW 제품 문의] 문의드립니다" class="btn-nextwork btn-inquiry">문의하기</a>
      <a href="https://drive.google.com/file/d/1O2crerevRxQBVMDhCaam6YU0o-Hhhx0T/preview"
         data-pdf="https://drive.google.com/file/d/1O2crerevRxQBVMDhCaam6YU0o-Hhhx0T/preview"
         class="btn-nextwork btn-download js-catalog">
        카탈로그 보기 (PDF)
      </a>
    </div>
  </div>
</section>

<section id="safework" class="panel">
  <div class="hero hero--product product">
    <h1 class="headline">I-BOW</h1>
    <p class="section-desc">고온 환경이나 위험한 작업 현장에서 근로자의 생명과 건강을 지키는 스마트 안전 솔루션입니다.</p>

    <div class="product-image">
      <img src="/images/I-BOW_WEB_KR_1.png" alt="I-BOW 메인 이미지">
    </div>

    <p class="subhead">I-BOW는 열사병, 온열질환 등 고온 환경에서의 신체 리스크를 사전에 감지하여 알리는 손목시계형 웨어러블 디바이스입니다.</p>

    <h3>01. 듀얼 센서를 통한 정밀한 리스크 감지</h3>
    <p class="detail-text">외부 기온과 피부 온도를 동시에 측정하며, 독자적인 알고리즘을 통해 심부 체온이 37.8°C 이상으로 상승할 경우 즉시 경고를 보냅니다.</p>

    <h3>02. 소리, 빛, 진동을 통한 확실한 알림</h3>
    <p class="detail-text">현장의 소음이나 주변 환경에 상관없이 리스크를 인지할 수 있도록 소리, 빛, 진동의 세 가지 패턴으로 위험을 알리고 수분 섭취와 휴식을 권고합니다.</p>

    <h3>03. 제품 주요 사양</h3>
    <div class="spec-box">
      <ul>
        <li><strong>크기</strong> 약 W32mm × H12.5mm</li>
        <li><strong>무게</strong> 약 40g (배터리 포함)</li>
        <li><strong>방수방진</strong> IP67 등급</li>
        <li><strong>가동 시간</strong> 완충 시 최대 90일 (1일 8시간 사용 기준)</li>
      </ul>
      <p style="font-size: 12px; color: var(--muted); margin-top: 15px; border-top: 1px solid var(--border); padding-top: 12px;">※ 본 제품은 의료기기가 아닙니다.</p>
    </div>

    <div class="cta-group">
      <a href="mailto:info@tuatua.kr?subject=[I-BOW 제품 문의] 문의드립니다" class="btn-nextwork btn-inquiry">문의하기</a>
      <a href="https://drive.google.com/file/d/1guSElPx47rHLTqPqHsWyfPbEF8lYGm8a/preview"
         data-pdf="https://drive.google.com/file/d/1guSElPx47rHLTqPqHsWyfPbEF8lYGm8a/preview"
         class="btn-nextwork btn-download js-catalog">
        카탈로그 보기 (PDF)
      </a>
    </div>
  </div>
</section>

<section id="contact" class="panel">
  <div class="hero hero--contact product">
    <h1 class="headline">문의</h1>
    <p class="section-desc">솔루션 도입 및 파트너십 문의를 환영합니다. 확인 후 신속히 연락드리겠습니다.</p>

    <div class="contact-grid">
      <div class="contact-card">
        <div class="card-label">전자 메일</div>
        <div class="card-value">
          <a id="contact-email" href="#" style="color:inherit; text-decoration:none;"></a>
        </div>
        <p style="font-size:14px; color:var(--muted); margin:0;">영업일 기준 1시간 이내에 답변 드립니다.</p>
      </div>

      <div class="contact-card">
        <div class="card-label">전화 번호</div>
        <div class="card-value">
          <a id="contact-phone" href="#" style="color:inherit; text-decoration:none;"></a>
        </div>
        <p style="font-size:14px; color:var(--muted); margin:0;">구매 문의 전화입니다.</p>
      </div>

      <div class="contact-card">
        <div class="card-label">Address</div>
        <div class="card-value">서울시 서초구 강남대로53길 8, 7-179</div>
        <p style="font-size:14px; color:var(--muted); margin:0;">강남역 5번 출구 인근</p>
      </div>

      <div class="contact-card">
        <div class="card-label">Partnership</div>
        <div class="card-value">
          <a href="https://tuatua.kr" target="_blank" rel="noopener" style="color:inherit; text-decoration:none;">TUA Inc.</a>
        </div>
        <p style="font-size:14px; color:var(--muted); margin:0;">NextWork Lab.은 주식회사 TUA의 판매 브랜드입니다.</p>
      </div>
    </div>
  </div>

  <!-- Catalog Gate Modal (CSS는 별도 추가) -->
  <div id="catalogGate" class="catalogGate" aria-hidden="true">
    <div class="catalogGate__dialog" role="dialog" aria-modal="true" aria-labelledby="catalogGateTitle">
      <div class="catalogGate__header">
        <h3 id="catalogGateTitle" class="catalogGate__title">카탈로그 열기</h3>
        <button type="button" class="catalogGate__close" data-gate-close aria-label="닫기">✕</button>
      </div>

      <div class="catalogGate__body">
        <p class="catalogGate__desc">자료 제공을 위해 간단한 정보만 확인합니다.</p>

        <div class="catalogGate__form">
          <input id="cgName" class="catalogGate__input" placeholder="이름" autocomplete="name">
          <input id="cgOrg" class="catalogGate__input" placeholder="소속 / 회사명" autocomplete="organization">
          <input id="cgPhone" class="catalogGate__input" placeholder="연락 가능한 전화번호 (지역번호·해외 번호 가능)" autocomplete="tel">
        </div>

        <div class="catalogGate__actions">
          <button type="button" class="catalogGate__btn catalogGate__btn--cancel" data-gate-close>취소</button>
          <button type="button" class="catalogGate__btn catalogGate__btn--submit" id="catalogGateSubmit">확인 후 열기</button>
        </div>

        <p class="catalogGate__note">자료 제공 목적 외의 연락은 드리지 않습니다.</p>
      </div>
    </div>
  </div>

  <script>
    (function () {
      // ===== Contact info (scrape-resistant) =====
      document.addEventListener("DOMContentLoaded", function () {
        const phone = "010-5643-5471";
        const contactPhoneEl = document.getElementById("contact-phone");
        if (contactPhoneEl) {
          contactPhoneEl.textContent = phone;
          contactPhoneEl.href = "tel:" + phone.replace(/-/g, "");
        }

        const user = "info";
        const domain = "tuatua.kr";
        const contactEmailEl = document.getElementById("contact-email");
        if (contactEmailEl) {
          const email = user + "@" + domain;
          contactEmailEl.textContent = email;
          contactEmailEl.href = "mailto:" + email;
        }
      });

      // ===== Catalog gate =====
      let targetPdf = null;
      let lastTrigger = null;

      const gateEl = document.getElementById("catalogGate");
      const submitEl = document.getElementById("catalogGateSubmit");
      const nameEl = document.getElementById("cgName");
      const orgEl = document.getElementById("cgOrg");
      const phoneEl = document.getElementById("cgPhone");

      function openGate(pdfUrl, triggerEl) {
        if (!gateEl || !pdfUrl) return;
        targetPdf = pdfUrl;
        lastTrigger = triggerEl || null;

        gateEl.classList.add("is-open");
        gateEl.setAttribute("aria-hidden", "false");

        if (nameEl) nameEl.value = "";
        if (orgEl) orgEl.value = "";
        if (phoneEl) phoneEl.value = "";

        setTimeout(function () {
          if (nameEl) nameEl.focus();
        }, 0);
      }

      function closeGate() {
        if (!gateEl) return;
        gateEl.classList.remove("is-open");
        gateEl.setAttribute("aria-hidden", "true");
        targetPdf = null;

        if (lastTrigger && typeof lastTrigger.focus === "function") {
          lastTrigger.focus();
        }
        lastTrigger = null;
      }

      function submitGate() {
        const name = nameEl ? nameEl.value.trim() : "";
        const org = orgEl ? orgEl.value.trim() : "";
        let phone = phoneEl ? phoneEl.value.trim() : "";

        // digits and "+" only, no 010 forcing
        phone = phone.replace(/[^0-9+]/g, "");

        if (!name || !org || phone.length < 8) {
          alert("이름, 소속, 연락처를 정확히 입력해 주세요.");
          return;
        }

        const pdf = targetPdf;
        closeGate();

        // 서버 전송은 여기서 연결
        // fetch("/api/catalog-lead", {
        //   method: "POST",
        //   headers: { "Content-Type": "application/json" },
        //   body: JSON.stringify({ name, org, phone, pdf })
        // });

        if (pdf) window.open(pdf, "_blank", "noopener");
      }

      // Click: open gate via event delegation
      document.addEventListener("click", function (e) {
        const a = e.target && e.target.closest ? e.target.closest("a.js-catalog") : null;
        if (a) {
          e.preventDefault();
          const pdf = a.getAttribute("data-pdf") || a.getAttribute("href");
          openGate(pdf, a);
          return;
        }

        // Close: any element with data-gate-close
        const close = e.target && e.target.closest ? e.target.closest("[data-gate-close]") : null;
        if (close) {
          e.preventDefault();
          closeGate();
          return;
        }

        // Close: click on overlay background (not dialog)
        if (gateEl && gateEl.classList.contains("is-open") && e.target === gateEl) {
          closeGate();
        }
      });

      // Keyboard: ESC closes
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") closeGate();
        if (e.key === "Enter" && gateEl && gateEl.classList.contains("is-open")) {
          const active = document.activeElement;
          if (active === nameEl || active === orgEl || active === phoneEl) {
            e.preventDefault();
            submitGate();
          }
        }
      });

      // Submit button
      if (submitEl) {
        submitEl.addEventListener("click", function () {
          submitGate();
        });
      }
    })();
  </script>
</section>
