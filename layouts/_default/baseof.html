<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} · {{ site.Title }}{{ end }}</title>

    {{ $css := resources.Get "css/main.css" | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}" />
  </head>

  <body>
    <div class="shell">
      <aside class="sidebar">
        <div class="sidebar-inner">
          <h1 class="site-name">
            <a href="{{ "/" | relURL }}">NextWork Lab.</a>
          </h1>

          <nav class="side-nav" aria-label="Site">
            <a href="#about">About</a>
            <a href="#cbw">CBW</a>
            <a href="#exgel">exgel</a>
            <a href="#contact">Contact</a>
          </nav>
        </div>
      </aside>

      <div class="main">
        <main class="main-inner">
          {{ block "main" . }}{{ end }}
        </main>

        <footer class="footer">
          <div class="main-inner">
            <span class="muted">© {{ now.Year }} NextWork Lab.</span>
          </div>
        </footer>
      </div>
    </div>

    <script>
      (function () {
        function setActiveNav(hash) {
          var links = document.querySelectorAll(".side-nav a[href^='#']");
          links.forEach(function (a) {
            a.classList.remove("is-active");
            if (a.getAttribute("href") === hash) a.classList.add("is-active");
          });
        }

        function showPanelFromHash() {
          var hash = window.location.hash || "#about";
          var id = hash.slice(1);

          var panels = document.querySelectorAll(".panel");
          panels.forEach(function (p) { p.style.display = "none"; });

          var target = document.getElementById(id);
          if (target && target.classList.contains("panel")) {
            target.style.display = "block";
          } else {
            var about = document.getElementById("about");
            if (about) about.style.display = "block";
            hash = "#about";
          }

          setActiveNav(hash);
          window.scrollTo(0, 0);
        }

        window.addEventListener("hashchange", showPanelFromHash);
        document.addEventListener("DOMContentLoaded", showPanelFromHash);
      })();
    </script>
  </body>
</html>
