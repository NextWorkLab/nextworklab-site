<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
  <link rel="stylesheet" href="{{ "css/main.css" | relURL }}">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>
<body>
  <div class="shell">
    <header class="sidebar">
      <div class="site-name">
        <a href="#about">NextWork Lab<span>.</span></a>
      </div>
      <p class="site-tagline">신체 부담은 줄이고, 더 안전하게 일할 수 있도록</p>
      <nav class="side-nav">
        <a href="#about">소개</a>
        <a href="#function">신체기능</a>
        <a href="#safework">안전한 작업</a>
        <a href="#contact">문의</a>
      </nav>
    </header>

    <main class="main">
      <div class="main-inner">
        {{ block "main" . }}{{ end }}
      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        <span class="copyright">&copy; {{ now.Format "2006" }} NextWork Lab. All rights reserved.</span>
      </div>
    </footer>
  </div>

  <script>
    (function() {
      function handleNav() {
        const hash = window.location.hash || "#about";
        const target = document.querySelector(hash);
        if (!target) return;

        const targetPanel = target.closest(".panel") || (target.classList.contains("panel") ? target : null);

        if (targetPanel) {
          // 모든 패널 숨김 및 해당 패널 표시
          document.querySelectorAll(".panel").forEach(p => p.style.display = "none");
          targetPanel.style.display = "block";

          // 메뉴 활성화 상태 업데이트
          document.querySelectorAll(".side-nav a").forEach(a => {
            a.classList.toggle("is-active", a.getAttribute("href") === "#" + targetPanel.id);
          });

          // 그리드 클릭 등으로 상세 요소를 찾은 경우 스크롤
          if (target !== targetPanel) {
            setTimeout(() => {
              target.scrollIntoView({ behavior: "smooth", block: "start" });
            }, 50);
          } else {
            window.scrollTo({ top: 0, behavior: "smooth" });
          }
        }
      }
      window.addEventListener("hashchange", handleNav);
      document.addEventListener("DOMContentLoaded", handleNav);
    })();
  </script>
</body>
</html>
